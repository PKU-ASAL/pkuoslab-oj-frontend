(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[28],{1009:function(e,t,s){"use strict";var a=s(948),o=s(81),n=s(60),i=s(951),r=s(983),l=s(292),c=s(163),d=s(960),u=s(108),b=s(299),m=s(122),j=s(950),p=s(33),h=s(99),O=s(0),S=s(123),g=s.n(S),y=s(992),x=s(182),v=s(73),I=s(38),f=s(58),w=s(178),T=s(955),C=s(5);var D=Object(a.a)()(Object(I.e)((e=>{const[t,s]=Object(O.useState)(!1);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(n.a,{...e.btnProps,onClick:()=>{s(!0)},children:e.btnText}),Object(C.jsx)(T.a,{width:1250,visible:t,footer:!1,onCancel:()=>{s(!1)},children:Object(C.jsx)(P,{...e})})]})})));var P=t.a=Object(v.b)((e=>{var t;const s=e.TableReduce,a=e.UserReducer;return{tableData:s.tableData,roles:null===(t=a.userInfo)||void 0===t?void 0:t.roles,isLogin:a.isLogin}}),(e=>({addTableVersion:t=>e({type:"addTableVersion",name:t}),setSelectedRowKeys:(t,s)=>e({type:"setSelectedRowKeys",data:t,name:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!0}),setTopSubmission:(t,s)=>e({type:"setTopSubmission",submissionID:t,submissionInfo:s}),setSubmissionModalVis:t=>e({type:"setSubmissionModalVis",data:t})})))(Object(a.a)()(Object(I.e)((e=>{var t,s;const[a,S]=Object(O.useState)(!1),[v,I]=Object(O.useState)([]),[T,P]=Object(O.useState)(!1),R=Object(f.a)(null===(t=e.tableData[e.name])||void 0===t?void 0:t.selectedRowKeys,[]),k=Object(f.a)(null===(s=e.tableData[e.name])||void 0===s?void 0:s.dataSource,[]),z=t=>{e.setTopSubmission(t.submissionId,{title:t.problemTitle,TimeLimit:t.timeLimit,MemoryLimit:t.memoryLimit,scoreMod:void 0===t.sumScore?"disable":"show",sumScore:t.sumScore,testcaseMod:"show",QuerySubmissionAPI:e.QuerySubmissionAPI}),e.setSubmissionModalVis(!0)},A=[{title:e.t("results"),dataIndex:"result",key:"result",render:(e,t)=>Object(C.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{z(t)},children:Object(C.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(C.jsx)(o.a,{title:g()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(C.jsx)("span",{children:g()(e).fromNow()})})}],F=[{title:"ID",dataIndex:"submissionId",key:"submissionId",render:(e,t)=>Object(C.jsx)(n.a,{type:"link",size:"small",onClick:()=>{z(t)},children:e})},{title:e.t("username"),dataIndex:"username",key:"username"},{title:e.t("problemNo."),dataIndex:"problemCode",key:"problemCode",render:e.problemCodeRender},{title:e.t("problemName"),dataIndex:"problemTitle",key:"problemTitle"},{title:e.t("results"),dataIndex:"result",key:"result",width:170,render:(e,t)=>Object(C.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{z(t)},children:Object(C.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})},{title:e.t("score"),dataIndex:"score",key:"score",render:(e,t)=>void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"},{title:e.t("template"),dataIndex:"judgeTemplateTitle",key:"judgeTemplateTitle"},{title:e.t("memoryUsage"),dataIndex:"usedMemory",key:"usedMemory",render:e=>e+" KB"},{title:e.t("timeUsage"),dataIndex:"usedTime",key:"usedTime",render:e=>e+" ms"},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:e=>Object(C.jsx)(o.a,{title:g()(e).format("YYYY-MM-DD HH:mm:ss"),children:Object(C.jsx)("span",{children:g()(e).fromNow()})})}];return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(d.a,{title:Object(C.jsxs)(i.b,{children:[void 0!==e.title?e.title:e.t("submissionRecord"),Object(C.jsx)(b.a,{open:a,dataHandle:t=>{const s=t[0],a=t[1],o=t[3],n=t[5],i=t[6],r=t[7],l=t[8];let c=k;const d=c.findIndex((e=>e.submissionId===s));if(-1!==d){if(Object(f.c)(c[d].cur_cpt)&&(c[d].cur_cpt=new Set),o<0){c[d].result=o.toString(),-1===o&&(localStorage.setItem(`submissionVersion:${s}`,`${a}`),c[d].result=n,c[d].score=i,c[d].usedTime=r,c[d].usedMemory=l);let e=0;for(const t of c)parseInt(t.result)<=0&&(e+=1);0===e&&S(!1)}else c[d].cur_cpt.add(o),c[d].RunningStep=c[d].cur_cpt.size,c[d].score+=i;e.setDataSource(c,e.name)}},queryList:v})]}),style:e.lessInfo?{}:{minWidth:1200},className:e.lessInfo?"smallBodyPadding":"",extra:Object(C.jsxs)(i.b,{children:[!0!==e.lessInfo&&Object(w.a)(e.roles,["admin","superadmin"])&&Object(C.jsx)(x.a,{API:m.a.rejudge,data:R,afterSuccess:()=>{e.addTableVersion(e.name),e.setSelectedRowKeys([],e.name)}}),Object(C.jsx)(n.a,{icon:Object(C.jsx)(j.a,{}),onClick:()=>{P(!0),e.addTableVersion(e.name),u.b.success(e.t("refreshSuccessfully")),setTimeout((()=>{P(!1)}),3e3)},disabled:T,children:e.t("refresh")})]}),actions:e.lessInfo&&e.isLogin?[Object(C.jsx)("div",{children:e.lessInfo&&e.isLogin&&Object(C.jsx)(D,{btnProps:{type:"text",block:!0},btnText:e.t("ShowAllInformation"),name:"Pro-SubmissionList-"+e.name,API:e.API,QuerySubmissionAPI:e.QuerySubmissionAPI})})]:void 0,children:Object(C.jsx)(y.a,{disableSelection:e.lessInfo||!Object(w.a)(e.roles,["admin","superadmin"]),defaultPageSize:e.lessInfo?5:void 0,showSizeChanger:!e.lessInfo&&void 0,pagination:!e.lessInfo&&void 0,columns:e.lessInfo?A:F,getForm:!0===e.useForm?t=>Object(C.jsxs)(i.b,{size:30,children:[Object(C.jsx)(r.a.Item,{label:e.t("username"),name:"username",children:Object(C.jsx)(l.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(C.jsx)(r.a.Item,{label:e.t("problemNo."),name:"problemCode",children:Object(C.jsx)(l.a,{onPressEnter:e=>{t()},allowClear:!0})}),Object(C.jsx)(r.a.Item,{label:e.t("JudgeResult"),name:"judgeResult",children:Object(C.jsx)(c.a,{onChange:t,allowClear:!0,style:{width:200},children:p.a.map((e=>Object(C.jsx)(c.a.Option,{value:parseInt(e),children:Object(C.jsx)(h.a,{type:"text",caseType:p.b.indexOf(p.c[e])})})))})})]}):void 0,name:e.name,size:"small",rowKey:"submissionId",API:t=>{if("problemCode"in t&&!Object(f.c)(t.problemCode)){let e=t.problemCode;1===e.length?(null!==e.match(/^[a-z]$/)&&(e=(e.charCodeAt(0)-"a".charCodeAt(0)+1).toString()),null!==e.match(/^[A-Z]$/)&&(e=(e.charCodeAt(0)-"A".charCodeAt(0)+1).toString())):null!==e.match(/^[0-9]{4}$/)&&(e="SDUOJ-"+e),t.problemCode=e}return e.API(t)},APIRowsTransForm:e=>{Object(f.c)(e)&&(e=[]);let t=[],s=[];for(const a of e)a.judgeResult<=0&&t.push(a.submissionId),s.push({...a,score:a.judgeScore,RunningStep:0,result:a.judgeResult.toString(),sumScore:a.sumScore,submitTime:parseInt(a.gmtCreate)});return 0!==t.length&&(S(!0),I(t)),s}})})})}))))},1191:function(e,t,s){"use strict";s.r(t);var a=s(948),o=s(38),n=s(1009),i=s(122),r=s(60),l=(s(0),s(84)),c=s(5);t.default=Object(a.a)()(Object(o.e)((e=>{const t=e.match.params.contestId;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(n.a,{name:"ContestSubmission-"+t,useForm:!0,API:e=>i.a.getContestSubmissionList({...e,contestId:t}),QuerySubmissionAPI:e=>i.a.getContestSubmissionInfo({contestId:t,submissionId:e}),InvalidateAPI:e=>i.a.invalidateContestSubmission({submissionId:e.submissionId,contestId:t}),problemCodeRender:s=>Object(c.jsx)(r.a,{type:"text",size:"small",onClick:()=>{e.history.push(l.g+"/contest/"+t+"/problem/"+s)},children:String.fromCharCode("A".charCodeAt(0)+parseInt(s)-1)})})})})))},980:function(e,t,s){"use strict";var a=s(960),o=s(983),n=s(951),i=s(60),r=s(1238),l=s(959),c=s(0),d=s(84),u=s(73),b=s(948),m=s(38),j=s(293),p=s(58),h=s(1253),O=s(5);t.a=Object(u.b)((e=>{var t;const s=e.UserReducer,a=e.TableReduce;return{roles:null===(t=s.userInfo)||void 0===t?void 0:t.roles,tableData:{...a.tableData}}}),(e=>({setTableInfo:(t,s)=>e({type:"setTableInfo",name:t,data:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!1})})))(Object(b.a)()(Object(m.e)((e=>{var t,s;const[u,b]=Object(c.useState)(0),[m,S]=Object(c.useState)(),[g,y]=Object(c.useState)(!0),[x,v]=Object(c.useState)(1),[I,f]=Object(c.useState)(Object(p.a)(e.defaultPageSize,d.h)),[w,T]=Object(c.useState)(),[C,D]=Object(c.useState)(0),P=t=>{S(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},R=(t,s,a,o)=>{var n,i,r,l,c;const d=null===(n=e.tableData[e.name])||void 0===n?void 0:n.tableInfo;var u,m,j,p;void 0!==d&&(void 0===o&&void 0!==d.moreProps&&k.setFieldsValue(d.moreProps),t=null!==(u=t)&&void 0!==u?u:d.pageNow,s=null!==(m=s)&&void 0!==m?m:d.pageSize,a=null!==(j=a)&&void 0!==j?j:d.searchKey,o=null!==(p=o)&&void 0!==p?p:d.moreProps);let h=null!==(i=t)&&void 0!==i?i:x,O=null!==(r=s)&&void 0!==r?r:I,S=null!==(l=a)&&void 0!==l?l:w,g=null!==(c=o)&&void 0!==c?c:k.getFieldsValue();v(h),f(O),T(S),y(!0),e.API({pageNow:h,pageSize:O,searchKey:S,...g}).then((t=>{null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?P(e.APIRowsTransForm(t.rows)):P(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(b(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:h,pageSize:O,searchKey:S,moreProps:g})):(b(O*t.totalPage),e.name&&e.setTableInfo(e.name,{total:O*t.totalPage,pageNow:h,pageSize:O,searchKey:S,moreProps:g})),y(!1)}))};Object(c.useEffect)((()=>{k.setFieldsValue(e.initRequestProps),R()}),[e.name]);const[k]=Object(h.a)(),z=()=>{const e=k.getFieldsValue();"{}"!==JSON.stringify(e)&&R(1,I,void 0,e)},A=()=>{var t;const s=k.getFieldsValue();k.resetFields();const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:a.total,pageNow:a.pageNow,pageSize:a.pageSize,searchKey:a.searchKey,moreProps:void 0});const o=k.getFieldsValue();JSON.stringify(s)!==JSON.stringify(o)&&R(1,I,void 0,void 0)};return Object(c.useEffect)((()=>{var t;const s=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==s&&C!==s)if(s<0){var a;D(-s),S(null===(a=e.tableData[e.name])||void 0===a?void 0:a.dataSource)}else{D(s);const e=k.getFieldsValue();R(x,I,w,e)}}),[e.tableData,C]),Object(O.jsxs)(O.Fragment,{children:[e.useList&&Object(O.jsx)(a.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:e.t("searchUser"),onSearch:e=>{T(e),v(1);const t=k.getFieldsValue();R(1,I,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(o.a,{form:k,children:[e.getForm(z),e.useFormBtn&&Object(O.jsxs)(n.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(i.a,{type:"primary",onClick:z,children:"\u7b5b\u9009"}),Object(O.jsx)(i.a,{htmlType:"button",onClick:A,children:"\u91cd\u7f6e"})]})]})]}),children:Object(O.jsx)(r.b,{grid:e.grid,itemLayout:"vertical",loading:g,size:e.size,dataSource:m,renderItem:e.renderItem,pagination:{onChange:(e,t)=>{R(e,t)},current:x,pageSize:I,total:u,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(O.jsx)(a.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(O.jsxs)(O.Fragment,{children:[!0===e.search&&Object(O.jsx)(j.a,{placeholder:"\u641c\u7d22",onSearch:e=>{T(e),v(1),R(1,I,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(O.jsxs)(o.a,{form:k,children:[e.getForm(z),Object(O.jsxs)(n.b,{style:{marginLeft:"30px"},size:20,children:[Object(O.jsx)(i.a,{type:"primary",onClick:z,children:e.t("filtering")}),Object(O.jsx)(i.a,{htmlType:"button",onClick:A,children:e.t("Reset")})]})]})]}),children:Object(O.jsx)(l.a,{rowKey:e.rowKey,loading:g,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:m,pagination:null!==(s=e.pagination)&&void 0!==s?s:{onChange:(e,t)=>{R(e,t)},current:x,pageSize:I,total:u,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(p.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},991:function(e,t,s){"use strict";var a=s(959),o=s(0),n=s.n(o),i=s(73),r=s(948),l=s(38),c=s(1016),d=s(1360),u=s(1013),b=s(5);t.a=n.a.memo(Object(i.b)((e=>({tableData:{...e.TableReduce.tableData}})),(e=>({setTableInfo:(t,s)=>e({type:"setTableInfo",name:t,data:s}),setDataSource:(t,s)=>e({type:"setDataSource",data:t,name:s,add:!1})})))(Object(r.a)()(Object(l.e)((e=>{const[t,s]=Object(o.useState)([]),[n,i]=Object(o.useState)(!0),[r,l]=Object(o.useState)(0),m=t=>{s(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},j=()=>{i(!0),e.API().then((t=>{null===t&&(t=[]),void 0!==e.APIRowsTransForm?m(e.APIRowsTransForm(t)):m(t),i(!1)}))};Object(o.useEffect)((()=>{j()}),[e.name]),Object(o.useEffect)((()=>{var t;const a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;var o;void 0!==a&&r!==a&&(a<0?(l(-a),s(null===(o=e.tableData[e.name])||void 0===o?void 0:o.dataSource)):(l(a),j()))}),[e.tableData,r]);const p=Object(c.c)((()=>Object(b.jsx)(d.a,{style:{cursor:"grab",color:"#999"}}))),h=Object(c.b)((e=>Object(b.jsx)("tr",{...e}))),O=Object(c.a)((e=>Object(b.jsx)("tbody",{...e}))),S=s=>{let{oldIndex:a,newIndex:o}=s;a!==o&&(m(Object(u.a)(t,a,o)),e.afterDrag&&e.afterDrag(t,a,o))},g=[{title:"",dataIndex:"sort",width:50,className:"drag-visable",render:()=>Object(b.jsx)(p,{})}];let y=e.columns;return e.useDrag&&(y=g.concat(y)),Object(b.jsx)(a.a,{...e,rowSelection:e.rowSelection,rowKey:e.rowKey,loading:n,size:e.size,columns:y,dataSource:t,pagination:!1,components:{body:{wrapper:e=>Object(b.jsx)(O,{useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:S,...e}),row:s=>{let{className:a,style:o,...n}=s;const i=t.findIndex((t=>t[e.rowKey]===n["data-row-key"]));return Object(b.jsx)(h,{index:i,...n})}}}})})))),((e,t)=>{var s,a;return e.columns===t.columns&&(null===(s=e.rowSelection)||void 0===s?void 0:s.selectedRowKeys.length)===(null===(a=t.rowSelection)||void 0===a?void 0:a.selectedRowKeys.length)&&e.tableData===t.tableData&&e.updateTrick===t.updateTrick}))},992:function(e,t,s){"use strict";var a=s(0),o=s(948),n=s(38),i=s(73),r=s(980),l=s(58),c=s(991),d=s(5);class u extends a.Component{constructor(){super(...arguments),this.setSelectedRowKeys=e=>{this.props.setSelectedRowKeys(e,this.props.name)}}componentDidMount(){}render(){var e;const t=Object(l.a)(null===(e=this.props.tableData[this.props.name])||void 0===e?void 0:e.selectedRowKeys,[]);let s={selectedRowKeys:t,onChange:e=>{this.setSelectedRowKeys(e)},selections:[{key:"all",text:this.props.t("selectedAll"),onSelect:e=>{let s=e;s=s.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(s)}},{key:"clear",text:this.props.t("clear"),onSelect:e=>{let s=t.filter((t=>!e.includes(t)));this.setSelectedRowKeys(s)}},{key:"invert",text:this.props.t("invert"),onSelect:e=>{let s=e.filter((e=>!t.includes(e)));s=s.concat(t.filter((t=>!e.includes(t)))),this.setSelectedRowKeys(s)}}]};return Object(d.jsxs)(d.Fragment,{children:[this.props.uesAlldata&&Object(d.jsx)(c.a,{...this.props,rowSelection:this.props.disableSelection?void 0:s}),!0!==this.props.uesAlldata&&Object(d.jsx)(r.a,{...this.props,rowSelection:this.props.disableSelection?void 0:s})]})}}t.a=Object(i.b)((e=>({tableData:e.TableReduce.tableData})),(e=>({setSelectedRowKeys:(t,s)=>e({type:"setSelectedRowKeys",data:t,name:s})})))(Object(o.a)()(Object(n.e)(u)))}}]);
//# sourceMappingURL=28.854f48c1.chunk.js.map