{"version":3,"sources":["Config/router/routerC.tsx","Pages/Error/TimeError.tsx"],"names":["routerC","id","path","UrlPrefix","exact","component","lazy","routerC_M","title_i18n","homeURL","router","length","withRouter","props","sysTime","setSysTime","useState","Date","now","serTime","setSerTime","useEffect","setInterval","clearInterval","update","parseInt","localStorage","getItem","className","map","Math","abs","status","title","subTitle","unix2Time","TimeDiff","min","max","extra","type","onClick","history","replace","cApi","getCopyright","then"],"mappings":"kGAAA,yHAIO,MAAMA,EAAyB,CAClC,CACIC,GAAI,EACJC,KAAMC,IAAY,SAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,+EAc1B,CACIL,GAAI,EACJC,KAAMC,IAAY,WAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,yDAE1B,CACIL,GAAI,GACJC,KAAMC,IAAY,wBAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,8EAE1B,CACIL,GAAI,EACJC,KAAMC,IAAY,cAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,+DA0B1B,CACIL,GAAI,EACJC,KAAMC,IAAY,QAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,uEAE1B,CACIL,GAAI,GACJC,KAAMC,IAAY,aAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,0DAgHjBC,EAAuB,CAQhC,CACIN,GAAI,EAEJO,WAAY,SAEZN,KAAMC,IAAY,WAClBC,OAAO,EACPC,UAAWC,gBAAK,IAAM,yDAE1B,CACIL,GAAI,EACJC,KAAMC,IAAY,cAClBK,WAAY,aACZJ,OAAO,EACPC,UAAWC,gBAAK,IAAM,gEAgCjBG,EAAWC,GAChBA,EAAOC,OAAS,EACTD,EAAO,GAAGR,KAEVC,IAAY,S,kCCrP3B,+EA+FeS,uBAvFIC,IAEf,MAAOC,EAASC,GAAcC,mBAAiBC,KAAKC,QAC7CC,EAASC,GAAcJ,mBAAiBC,KAAKC,OAOpDG,qBAAU,KACN,IAAIpB,EAAKqB,aAAY,KALrBP,EAAWD,EAAU,UACrBM,EAAWD,EAAU,OAIa,KAClC,MAAO,IAAMI,cAActB,MAG/B,MAAMuB,EAAS,KAAK,IAAD,EACfJ,EAAWK,SAAQ,UAACC,aAAaC,QAAQ,sBAAtB,QAAwC,MAC3DZ,EAAWE,KAAKC,QAOpB,OAJAG,qBAAU,KACNG,MACD,IAGC,qBAAKI,UAAW,cAAhB,SAEQ,CAAC,IAAIC,KAAI,IACDC,KAAKC,IAAIjB,EAAUK,GAAW,IAE1B,cAAC,IAAD,CACIa,OAAO,UACPC,MAAM,uIACNC,SACI,qCACI,kEAAYC,YAAUrB,MAD1B,IAC2C,uBACvC,wEAAaqB,YAAUhB,MAF3B,IAE4C,uBACxC,kEAAYiB,YAASN,KAAKO,IAAIvB,EAASK,GAAUW,KAAKQ,IAAIxB,EAASK,UAG3EoB,MACI,cAAC,IAAD,CACIC,KAAK,UAELC,QAAS,KACL5B,EAAM6B,QAAQC,QAAQlC,YAAQF,OAJtC,qCAEQ,YAYhB,cAAC,IAAD,CACIyB,OAAO,UACPC,MAAO,qMACPC,SACI,qCACI,kEAAYC,YAAUrB,MAD1B,IAC2C,uBACvC,wEAAaqB,YAAUhB,MAF3B,IAE4C,uBACxC,kEAAYiB,YAASN,KAAKO,IAAIvB,EAASK,GAAUW,KAAKQ,IAAIxB,EAASK,UAG3EoB,MACI,cAAC,IAAD,CACIC,KAAK,UAELC,QAAS,KACLG,IAAKC,eAAeC,MAAK,KACrBtB,QALZ,qCAEQ","file":"static/js/25.f63cb1ca.chunk.js","sourcesContent":["import {lazy} from \"react\";\nimport {IBaseRouter, IRouter} from \"./router\";\nimport {UrlPrefix} from \"../constValue\";\n\nexport const routerC: IBaseRouter[] = [\n    {\n        id: 2,\n        path: UrlPrefix + \"/login\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CLogin'))\n    },\n    // {\n    //     id: 3,\n    //     path: UrlPrefix + \"/test\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CTest'))\n    // },\n    // {\n    //     id: 4,\n    //     path: UrlPrefix + \"/home\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CHome'))\n    // },\n    {\n        id: 5,\n        path: UrlPrefix + \"/problem\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CProblem'))\n    },\n    {\n        id: 51,\n        path: UrlPrefix + \"/problem/:ProblemCode\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CProblemInfo'))\n    },\n    {\n        id: 6,\n        path: UrlPrefix + \"/submission\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CSubmissions'))\n    },\n    // {\n    //     id: 7,\n    //     path: UrlPrefix + \"/contest\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CContest'))\n    // },\n    // {\n    //     id: 71,\n    //     path: UrlPrefix + \"/contest/:contestId\",\n    //     exact: false,\n    //     component: lazy(() => import('../../Pages/Client/CContestInfo'))\n    // },\n    // {\n    //     id: 8,\n    //     path: UrlPrefix + \"/group\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CGroup'))\n    // },\n    // {\n    //     id: 81,\n    //     path: UrlPrefix + \"/group/:groupId\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CGroupInfo'))\n    // },\n    {\n        id: 9,\n        path: UrlPrefix + \"/user\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CUser'))\n    },\n    {\n        id: 10,\n        path: UrlPrefix + \"/resetpass\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CResetPass'))\n    },\n    // {\n    //     id: 11,\n    //     path: UrlPrefix + \"/thirdPartyLogin\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CThirdPartyLogin'))\n    // },\n    // {\n    //     id: 12,\n    //     path: UrlPrefix + \"/problemSet/:problemSetId\",\n    //     exact: false,\n    //     component: lazy(() => import(\"../../Component/problemSet/PSLayout\"))\n    // },\n    // {\n    //     id: 13,\n    //     path: UrlPrefix + \"/problemSetPublic/:problemSetId\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Component/problemSet/Public\"))\n    // },\n    // {\n    //     id: 7361,\n    //     path: UrlPrefix + \"/studentMutualEvaluation\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Pages/Client/CStudentMutualEvaluation\"))\n    // },\n    // {\n    //     id: 7359,\n    //     path: UrlPrefix + \"/hws\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Ext/Ext-Hws'))\n    // },\n    // {\n    //     id: 7360,\n    //     path: UrlPrefix + \"/hws/:cid\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Ext/Ext-HwsInfo'))\n    // },\n]\n\nexport const router_ProblemSet: IBaseRouter[] = [\n//     {\n//         id: 13,\n//         path: UrlPrefix + \"/problemSet/:problemSetId/overview\",\n//         exact: true,\n//         component: lazy(() => import(\"../../Component/problemSet/Overview\"))\n//     },\n//     {\n//         id: 14,\n//         path: UrlPrefix + \"/problemSet/:problemSetId/problem/:problemGroupId/:problemId\",\n//         exact: true,\n//         component: lazy(() => import(\"../../Component/problemSet/Problem\"))\n//     },\n//     {\n//         id: 15,\n//         path: UrlPrefix + \"/problemSet/:problemSetId/rank\",\n//         exact: true,\n//         component: lazy(() => import(\"../../Component/problemSet/Rank\"))\n//     },\n//     {\n//         id: 16,\n//         path: UrlPrefix + \"/problemSet/:problemSetId/review\",\n//         exact: true,\n//         component: lazy(() => import(\"../../Component/problemSet/Review\"))\n//     },\n//     {\n//         id: 17,\n//         path: UrlPrefix + \"/problemSet/:problemSetId/submission\",\n//         exact: true,\n//         component: lazy(() => import(\"../../Component/problemSet/Submission\"))\n//     },\n]\n\nexport const routerC_Contest_M: IRouter[] = [\n    // {\n    //     id: 1,\n    //     title_i18n: \"Overview\",\n    //     path: UrlPrefix + \"/contest/:contestId/overview\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Component/contest/Overview\"))\n    // },\n    // {\n    //     id: 2,\n    //     title_i18n: \"Problem\",\n    //     path: UrlPrefix + \"/contest/:contestId/problem/:problemCode\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Component/contest/Problem\"))\n    // },\n    // {\n    //     id: 3,\n    //     title_i18n: \"Status\",\n    //     path: UrlPrefix + \"/contest/:contestId/submission\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Component/contest/Status\"))\n    // },\n    // {\n    //     id: 4,\n    //     title_i18n: \"Rank\",\n    //     path: UrlPrefix + \"/contest/:contestId/rank\",\n    //     exact: true,\n    //     component: lazy(() => import(\"../../Component/contest/Rank\"))\n    // },\n    // {\n    //     id: 5,\n    //     title_i18n: \"Register\",\n    //     path: UrlPrefix + \"/contest/:contestId/register\",\n    //     exact: true,\n    //     component: lazy(()=> import(\"../../Component/contest/Register\"))\n    // }\n]\n\n// C 端目录\nexport const routerC_M: IRouter[] = [\n    // {\n    //     id: 1,\n    //     title_i18n: \"Home\",\n    //     path: UrlPrefix + \"/home\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CHome'))\n    // },\n    {\n        id: 2,\n        // HRZ: 修改导航栏显示的第一个标题\n        title_i18n: \"OJInfo\",\n        // title_i18n: \"Problem\",\n        path: UrlPrefix + \"/problem\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CProblem'))\n    },\n    {\n        id: 3,\n        path: UrlPrefix + \"/submission\",\n        title_i18n: \"Submission\",\n        exact: true,\n        component: lazy(() => import('../../Pages/Client/CSubmissions'))\n    },\n    // {\n    //     id: 4,\n    //     path: UrlPrefix + \"/contest\",\n    //     title_i18n: \"Contest\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CContest'))\n    // },\n    // {\n    //     id: 5,\n    //     path: UrlPrefix + \"/group\",\n    //     title_i18n: \"Group\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Client/CGroup'))\n    // },\n    // {\n    //     id: 6,\n    //     path: UrlPrefix + \"/hws\",\n    //     title_i18n: \"文件提交\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Ext/Ext-Hws'))\n    // },\n    // {\n    //     id: 7,\n    //     path: UrlPrefix + \"/exam\",\n    //     title_i18n: \"考试系统\",\n    //     exact: true,\n    //     component: lazy(() => import('../../Pages/Exam/EList'))\n    // },\n]\n\nexport const homeURL = (router: IRouter[]) => {\n    if (router.length > 0) {\n        return router[0].path;\n    } else {\n        return UrlPrefix + \"/home\";\n    }\n}","import {Button, Result} from \"antd\";\nimport {TimeDiff, unix2Time} from \"../../Utils/Time\";\nimport {useEffect, useState} from \"react\";\nimport {withRouter} from \"react-router-dom\";\nimport {UrlPrefix} from \"../../Config/constValue\";\nimport cApi from \"Utils/API/c-api\";\nimport {homeURL,routerC_M} from \"../../Config/router/routerC\";\n\nconst TimeError = (props: any) => {\n\n    const [sysTime, setSysTime] = useState<number>(Date.now())\n    const [serTime, setSerTime] = useState<number>(Date.now())\n\n    const add = () => {\n        setSysTime(sysTime + 1000)\n        setSerTime(serTime + 1000)\n    }\n\n    useEffect(() => {\n        let id = setInterval(() => add(), 1000)\n        return () => clearInterval(id)\n    })\n\n    const update = ()=>{\n        setSerTime(parseInt(localStorage.getItem(\"server-time\") ?? \"0\"))\n        setSysTime(Date.now())\n    }\n\n    useEffect(() => {\n        update()\n    }, [])\n\n    return (\n        <div className={\"page-center\"}>\n            {\n                [''].map(() => {\n                    if (Math.abs(sysTime - serTime) < 60000) {\n                        return (\n                            <Result\n                                status=\"success\"\n                                title=\"您的系统时间与服务器时间误差在容许范围之内。\"\n                                subTitle={\n                                    <>\n                                        <span>系统时间：{unix2Time(sysTime)}</span> <br/>\n                                        <span>服务器时间：{unix2Time(serTime)}</span> <br/>\n                                        <span>时间相差：{TimeDiff(Math.min(sysTime, serTime), Math.max(sysTime, serTime))}</span>\n                                    </>\n                                }\n                                extra={\n                                    <Button\n                                        type=\"primary\"\n                                        key=\"return\"\n                                        onClick={() => {\n                                            props.history.replace(homeURL(routerC_M))\n                                        }}\n                                    >\n                                        返回主页\n                                    </Button>\n                                }\n                            />\n                        )\n                    } else {\n                        return (\n                            <Result\n                                status=\"warning\"\n                                title={\"您的系统时间有误，这会影响 PKU-OSLAB OJ 系统的工作，请您更正当前系统时间。\"/*HRZ:修改名字*/}\n                                subTitle={\n                                    <>\n                                        <span>系统时间：{unix2Time(sysTime)}</span> <br/>\n                                        <span>服务器时间：{unix2Time(serTime)}</span> <br/>\n                                        <span>时间相差：{TimeDiff(Math.min(sysTime, serTime), Math.max(sysTime, serTime))}</span>\n                                    </>\n                                }\n                                extra={\n                                    <Button\n                                        type=\"primary\"\n                                        key=\"retry\"\n                                        onClick={() => {\n                                            cApi.getCopyright().then(()=>{\n                                                update()\n                                            })\n                                        }}\n                                    >\n                                        点击重试\n                                    </Button>\n                                }\n                            />\n                        )\n                    }\n                })\n            }\n        </div>\n    )\n}\n\nexport default withRouter(TimeError)\n"],"sourceRoot":""}